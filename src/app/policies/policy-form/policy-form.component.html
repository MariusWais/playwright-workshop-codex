<div class="form-container">
  <div class="form-header">
    <h2>{{ isEdit() ? 'Edit Policy' : 'Add New Policy' }}</h2>
    <div class="breadcrumb">
      <a (click)="router.navigate(['/policies'])" style="cursor: pointer;">Policies</a>
      / {{ isEdit() ? 'Edit' : 'New' }}
    </div>
  </div>

  <div class="form-card">
    <form [formGroup]="form" (ngSubmit)="save()" class="policy-form">
      <div class="form-group">
        <label for="policyNumber">
          Policy Number <span class="required">*</span>
        </label>
        <input
          id="policyNumber"
          formControlName="policyNumber"
          [attr.data-testid]="'policyNumber'"
          placeholder="Enter policy number"
          autocomplete="off" />
        @if (form.controls.policyNumber.invalid && form.controls.policyNumber.touched) {
          <span class="error-message">Policy number is required</span>
        }
      </div>

      <div class="form-group">
        <label for="customerName">
          Customer Name <span class="required">*</span>
        </label>
        <input
          id="customerName"
          formControlName="customerName"
          [attr.data-testid]="'customerName'"
          placeholder="Enter customer name"
          autocomplete="off" />
        @if (form.controls.customerName.invalid && form.controls.customerName.touched) {
          <span class="error-message">Customer name is required</span>
        }
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="startDate">
            Start Date <span class="required">*</span>
          </label>
          <input
            id="startDate"
            type="date"
            formControlName="startDate"
            [attr.data-testid]="'startDate'" />
          @if (form.controls.startDate.invalid && form.controls.startDate.touched) {
            <span class="error-message">Start date is required</span>
          }
        </div>

        <div class="form-group">
          <label for="endDate">
            End Date <span class="required">*</span>
          </label>
          <input
            id="endDate"
            type="date"
            formControlName="endDate"
            [attr.data-testid]="'endDate'" />
          @if (form.controls.endDate.invalid && form.controls.endDate.touched) {
            <span class="error-message">End date is required</span>
          }
        </div>
      </div>

      <div class="form-group">
        <label for="premiumAmount">
          Premium Amount <span class="required">*</span>
        </label>
        <input
          id="premiumAmount"
          type="number"
          formControlName="premiumAmount"
          [attr.data-testid]="'premiumAmount'"
          placeholder="0.00"
          step="0.01"
          min="0" />
        @if (form.controls.premiumAmount.invalid && form.controls.premiumAmount.touched) {
          <span class="error-message">Premium amount is required</span>
        }
        <span class="hint">Enter the premium amount in USD</span>
      </div>

      <div class="form-actions">
        <button
          type="button"
          class="cancel-btn"
          (click)="router.navigate(['/policies'])">
          Cancel
        </button>
        <button
          type="submit"
          class="save-btn"
          [attr.data-testid]="'save'"
          [disabled]="form.invalid">
          {{ isEdit() ? 'Update Policy' : 'Create Policy' }}
        </button>
      </div>
    </form>
  </div>
</div>
